<div *ngIf="imagenes && imagenes.length > 0" class="carousel-container w-100 d-flex flex-column justify-content-center align-items-center"
     (swipeleft)="siguiente()" 
     (swiperight)="anterior()">
  <div class="carousel-wrapper position-relative vh-50 w-100">
    <button class="btn izquierda px-2 h-100 border-0 position-absolute start-0 top-50 translate-middle-y" 
            (click)="anterior()"
            aria-label="Imagen anterior">
      <i class="bi bi-arrow-left-circle-fill fs-3 text-primary-darken"></i>
    </button>
    
    <div class="container-img h-100 d-flex justify-content-center align-items-center overflow-hidden">
      <ng-container *ngFor="let imagen of imagenes; let i = index">
        <img [src]="imagen" 
             [class.active]="i === indiceActual"
             loading="lazy"
             class="carousel-image h-100 border border-primary border-3 rounded rounder-5 position-absolute"
             [attr.alt]="'Imagen ' + (i + 1) + ' de ' + imagenes.length"
             [attr.aria-hidden]="i !== indiceActual">
      </ng-container>
    </div>
    
    <button class="btn derecha px-2 h-100 border-0 position-absolute end-0 top-50 translate-middle-y" 
            (click)="siguiente()"
            aria-label="Siguiente imagen">
      <i class="bi bi-arrow-right-circle-fill fs-3 text-primary-darken"></i>
    </button>
  </div>
  
  <div class="carousel-controls mt-3 d-flex justify-content-center align-items-center">
    <button class="btn btn-sm btn-primary me-2" (click)="toggleAutoplay()">
      {{ autoplayActive ? 'Pausar' : 'Reproducir' }}
    </button>
    <div class="d-flex">
      <div *ngFor="let im of imagenes; let i = index" class="mx-1">
        <div class="dot" 
             [class.active]="i === indiceActual"
             [class.bg-primary]="i === indiceActual"
             [class.bg-secondary]="i !== indiceActual"
             (click)="irA(i)"
             [attr.aria-label]="'Ir a imagen ' + (i + 1)"
             role="button"
             tabindex="0"></div>
      </div>
    </div>
  </div>
</div>
